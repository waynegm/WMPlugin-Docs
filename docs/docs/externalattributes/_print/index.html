<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.97.3" />
<link rel="canonical" type="text/html" href="https://waynegm.github.io/WMPlugin-Docs/docs/externalattributes/">
<link rel="alternate" type="application/rss&#43;xml" href="https://waynegm.github.io/WMPlugin-Docs/docs/externalattributes/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/WMPlugin-Docs/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/WMPlugin-Docs/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/WMPlugin-Docs/favicons/android-192x192.png" sizes="192x192">

<title>External Attributes | WMPlugins</title>
<meta name="description" content="">
<meta property="og:title" content="External Attributes" />
<meta property="og:description" content="Documentation for my open source plugins to the OpendTect seismic interpretation system" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://waynegm.github.io/WMPlugin-Docs/docs/externalattributes/" /><meta property="og:site_name" content="WMPlugins" />

<meta itemprop="name" content="External Attributes">
<meta itemprop="description" content="Documentation for my open source plugins to the OpendTect seismic interpretation system"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="External Attributes"/>
<meta name="twitter:description" content="Documentation for my open source plugins to the OpendTect seismic interpretation system"/>




<link rel="preload" href="/WMPlugin-Docs/scss/main.min.89300008cc31a5e13d36bfdb093b10fd4fcc4d3c8ff708f3f9128af3884f69d3.css" as="style">
<link href="/WMPlugin-Docs/scss/main.min.89300008cc31a5e13d36bfdb093b10fd4fcc4d3c8ff708f3f9128af3884f69d3.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>


<link rel="stylesheet" href="/WMPlugin-Docs/css/juxtapose.css"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-62607269-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/WMPlugin-Docs/">
		<span class="navbar-logo"><svg width="30" height="29.990032" id="svg2" inkscape:version="1.1.2 (0a00cf5339, 2022-02-04, custom)" inkscape:export-filename="test.png" inkscape:export-xdpi="100" inkscape:export-ydpi="100" sodipodi:docname="logo.svg" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/"><defs id="defs4"><clipPath clipPathUnits="userSpaceOnUse" id="clipPath3861"><rect style="fill:none;stroke:maroon;stroke-width:.313602;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:0;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1" id="rect3863" width="77.660332" height="77.853149" x="310.03735" y="224.89983" rx=".50646973" ry=".50646973"/></clipPath></defs><sodipodi:namedview id="base" pagecolor="#ffffff" bordercolor="#666666" borderopacity="1" inkscape:pageopacity="1" inkscape:pageshadow="2" inkscape:zoom="5.7415178" inkscape:cx="14.543193" inkscape:cy="45.893788" inkscape:document-units="px" inkscape:current-layer="layer1" showgrid="false" inkscape:window-width="1542" inkscape:window-height="836" inkscape:window-x="884" inkscape:window-y="151" inkscape:window-maximized="0" inkscape:pagecheckerboard="0" fit-margin-top="0" fit-margin-left="0" fit-margin-right="0" fit-margin-bottom="0" showborder="true"/><g inkscape:label="Layer 1" inkscape:groupmode="layer" id="layer1" transform="translate(-309.40455,-224.50644)"><rect style="fill:#fff;stroke:none;stroke-width:1.08" id="rect308" width="30" height="30" x="309.40454" y="224.50644"/><g id="g106" transform="matrix(0.38121346,0,0,0.38121346,191.45537,138.92156)"><text style="font-style:normal;font-weight:400;line-height:0%;font-family:bitstream vera sans;letter-spacing:0;word-spacing:0;fill:#000;fill-opacity:1;stroke:none" x="313.37061" y="291.67529" id="text3050"><tspan sodipodi:role="line" id="tspan3052" x="313.37061" y="291.67529" style="font-size:11px;line-height:1.25">Â </tspan></text><path style="fill:maroon;stroke:maroon;stroke-width:0;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m387.4512 242.23695s0-.12316-5.54206-.12316-24.01557 2.33998-24.75451 25.98608c-.73894 23.6461 17.48826 25.3703 21.79875 25.24714 4.31049-.12316 8.74413.0 8.74413.0l-.12316 4.92627s-.98525 1.10841-8.37465.98526c-7.38941-.12316-26.47871-4.80311-26.60187-30.54288-.12316-25.73977 23.52295-32.63655 29.065-32.39023s5.91152.36947 5.91152.36947z" id="path3853" inkscape:connector-curvature="0" sodipodi:nodetypes="czzzcczzzcc"/><path style="fill:maroon;stroke:maroon;stroke-width:.4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m362.943 266.00621c.224-12.51095 9.42012-17.08677 16.62616-17.11879 7.20604-.032 8.00519 2.70944 8.00519 2.70944l-.24631 7.26625s-3.31403-4.8874-9.1136-4.92627c-5.79957-.0389-10.90531 5.75542-10.8378 12.43884.0675 6.68342 4.37668 13.20715 9.85255 13.54724s10.34516-5.4189 10.34516-5.4189l-.12315 8.12835s-2.99852 2.97549-9.48307 2.95576c-6.48455-.0197-15.24913-7.07097-15.02513-19.58192z" id="path3855" inkscape:connector-curvature="0" sodipodi:nodetypes="zzcczzzcczz"/><path sodipodi:type="arc" style="fill:none;stroke:none" id="path3065" sodipodi:cx="377.86176" sodipodi:cy="266.76852" sodipodi:rx="2.8738046" sodipodi:ry="4.4413342" d="m380.73556 266.76852a2.8738046 4.4413342.0 01-2.87041 4.44134 2.8738046 4.4413342.0 01-2.87719-4.43084 2.8738046 4.4413342.0 012.86361-4.4518 2.8738046 4.4413342.0 012.88396 4.42032" sodipodi:start="0" sodipodi:end="6.2784611" sodipodi:open="true" sodipodi:arc-type="arc"/><path style="fill:maroon;stroke:maroon;stroke-width:.2;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m343.23792 268.22303c-.0259-6.55971 2.48565-13.87236 4.43365-18.2272 1.94799-4.35485 5.78836-10.8378 10.83779-15.76407 5.04943-4.92627 11.45358-9.9757 21.79875-9.60623 10.34516.36947 7.26624.36947 7.26624.36947l-.12315 4.31049s.87575-.27087-6.89678-.24631c-7.77253.0246-17.48827 5.17258-22.29138 11.20726-4.80311 6.03468-10.93423 17.70247-10.71464 26.72502.21959 9.02254.98526 17.73457 6.03469 24.75451 6.81828 9.47906 10.71464 11.33042 10.71464 11.33042s-6.76189-.17021-7.26626-.12316c-3.33696-2.9087-7.50492-8.85484-9.48307-13.05461-1.97815-4.19977-4.28454-15.11588-4.31048-21.67559z" id="path3083" inkscape:connector-curvature="0" sodipodi:nodetypes="zzzscczzzscczz"/><path style="fill:none;stroke:#000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m336.32222 244.2135 40.92994 21.24874h-.17417v0" id="path3069" inkscape:connector-curvature="0"/><path style="fill:none;stroke:#000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m320.29858 259.54046 56.08273 7.83765v0" id="path3071" inkscape:connector-curvature="0"/><path style="fill:none;stroke:#000;stroke-width:1px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m339.80562 274.34491 36.92403-5.74761" id="path3073" inkscape:connector-curvature="0"/><path style="fill:maroon;stroke:#000;stroke-width:.4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m336.67056 244.56184-4.70259.34834-13.75943-6.44429 5.39927-1.56753-1.04502-5.2251 13.75943 8.36016z" id="path3075" inkscape:connector-curvature="0"/><path style="fill:maroon;stroke:#000;stroke-width:.4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m322.56279 280.44086h11.32105l6.9668-6.09595-5.57344-2.61255-14.97862.34834 4.87676 3.83174z" id="path3077" inkscape:connector-curvature="0"/><path style="fill:maroon;stroke:#000;stroke-width:.4;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" d="m309.98559 262.06519 6.03468-.49263 4.67996-2.09366-2.83261-3.81786-8.2515-3.32523z" id="path3081" inkscape:connector-curvature="0"/></g></g></svg></span><span class="font-weight-bold">WMPlugins</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/WMPlugin-Docs/about/" ><span>About</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/WMPlugin-Docs/docs/" ><span class="active">Documentation</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/WMPlugin-Docs/blog/" ><span>Blog</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/WMPlugin-Docs/community/" ><span>Community</span></a>
			</li>
			
			
			
			<li><a class="btn btn-sm btn-secondary mr-4 nav-link" href="https://ko-fi.com/N4N6CFI7R" target="blank" >
			    Support WMPlugins Development <i class="fas fa-arrow-alt-circle-right ml-2"></i></a>
			</li>
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; Search this siteâ¦"
  aria-label="Search this siteâ¦"
  autocomplete="off"
  
  data-offline-search-index-json-src="/WMPlugin-Docs/offline-search-index.25aa1fe89126464dbe9d725d7614ad19.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
This is the multi-page printable view of this section.
<a href="#" onclick="print();return false;">Click here to print</a>.
</p><p>
<a href="/WMPlugin-Docs/docs/externalattributes/">Return to the regular view of this page</a>.
</p>
</div>



<h1 class="title">External Attributes</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-d2bfe1e7a87e7509ba0947e6332b0036">Add Noise</a></li>


    
  
    
    
	
<li>2: <a href="#pg-d2c206172dcffe1e29f2520c4b50c656">AVO Intercept and Gradient</a></li>


    
  
    
    
	
<li>3: <a href="#pg-3d4b3983a71a9c911c64afb4f459cd5c">Dip and Azimuth</a></li>


    
  
    
    
	
<li>4: <a href="#pg-14b684fb5a039eb5a6d83b575091729b">LPA Smoothing</a></li>


    
  
    
    
	
<li>5: <a href="#pg-6339e016e546cceb00824d6c05b86ba9">PyLops Attributes</a></li>


    
  
    
    
	
<li>6: <a href="#pg-7620b32bbbc8a8e4506e9152225ada74">Spatial Filter - Circular</a></li>


    
  
    
    
	
<li>7: <a href="#pg-74177a1ba4b2b32107ee6625c357dbf0">Spatial Filter - Rectangular</a></li>


    
  
    
    
	
<li>8: <a href="#pg-bb20e9884ad12460dce0dba23654d323">Vector Filter</a></li>


    
  
    
    
	
<li>9: <a href="#pg-9834c339e4430f5c90b058dd1e3b0f77">Time Delay Estimation</a></li>


    
  
    
    
	
<li>10: <a href="#pg-9263895aadfe62f3ba6db24d9f3eb8f9">ZC Block</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-d2bfe1e7a87e7509ba0947e6332b0036">1 - Add Noise</h1>
    <div class="lead">add gaussian distributed noise to an input</div>
	<p><strong>Script: Miscellaneous/ex_add_noise.py</strong></p>
<h2 id="description">Description</h2>
<p>This Python <a href="../../plugins/externalattrib/">External Attribute</a> script adds gaussian distributed noise to an input signal.</p>
<h2 id="examples">Examples</h2>
<p>This example shows an input signal with different levels of added noise.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/addnoise/ex_add_noise_example.jpg"
         alt="Input with varying levels of added noise" width="90%"/> <figcaption>
            <p><strong>Input with varying levels of added noise</strong></p>
        </figcaption>
</figure>

<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/addnoise/ex_add_noise_input.jpg"
         alt="ex_add_noise.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_add_noise.py input parameters</strong></p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>S/N Ratio</td>
<td>Desired signal to noise ratio.</td>
</tr>
</tbody>
</table>
 </div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d2c206172dcffe1e29f2520c4b50c656">2 - AVO Intercept and Gradient</h1>
    <div class="lead">estimate AVO intercept and gradient from angle stacks</div>
	<h2 id="description">Description</h2>
<p>These <a href="../../plugins/externalattrib">External Attribute</a> scripts estimate AVO intercept and gradient based on Shuey&rsquo;s 2 term approximation
to the Zoeppritz equation. Scripts are provided for 3, 4 and 5 angle stacks.</p>
<h2 id="intercept-and-gradient-from-angle-stacks">Intercept and Gradient from Angle Stacks</h2>
<p><strong>Script: Miscellaneous/ex_angle_stacks_3_to_AVOIG.py</strong>
<strong>Script: Miscellaneous/ex_angle_stacks_4_to_AVOIG.py</strong>
<strong>Script: Miscellaneous/ex_angle_stacks_5_to_AVOIG.py</strong></p>
<p>Takes as input angle stacks and the corresponding angles and fits a least squares line to the \(amplitude\) and \(sin^2(angle)\) at
each sample point. Output includes the intercept, gradient and the correlation coefficient of the line fit.</p>
<h3 id="input-parameters">Input Parameters</h3>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/avo_ig/ex_AVOIG_4_input.jpg"
         alt="ex_angle_stacks_4_to_AVOIG.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_angle_stacks_4_to_AVOIG.py input parameters</strong></p>
        </figcaption>
</figure>

<p>For each input volume the corresponding incident angle must be provided.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3d4b3983a71a9c911c64afb4f459cd5c">3 - Dip and Azimuth</h1>
    <div class="lead">various scripts to estimate orientation</div>
	<h2 id="description">Description</h2>
<p>These Python <a href="../../plugins/externalattrib">External Attribute</a> scripts implement various algorithms to estimate orientation, ie dip or dip azimuth.</p>
<p>All scripts will estimate at least the following attributes:</p>





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>OUTPUT</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Inline Dip</td>
<td>Event dip observed on a crossline in microseconds per metre for time surveys and millimetres per metre for depth surveys. Output can be positive or negative with the convention that events dipping towards larger inline numbers producing positive dips.</td>
</tr>
<tr>
<td>Crossline Dip</td>
<td>Event dip observed on an inline in microseconds per metre for time surveys and millimetres per metre for depth surveys. Output can be positive or negative with the convention that events dipping towards larger crossline numbers producing positive dips.</td>
</tr>
<tr>
<td>True Dip</td>
<td>Event dip in microseconds per metre for time surveys and millimetres per metre for depth surveys. Output is always positive.</td>
</tr>
<tr>
<td>Dip Azimuth</td>
<td>Azimuth of the True Dip direction relative to the survey orientation. Output ranges from -180 to 180 degrees. Positive azimuth is defined from the inline in the direction of increasing crossline numbers. Azimuth = 0 indicates that the dip is dipping in the direction of increasing crossline numbers. Azimuth = 90 indicates that the dip is dipping in the direction of increasing inline numbers.</td>
</tr>
</tbody>
</table>
 </div>

<p>Some scripts may offer additional outputs such as a measure of event coherency or planarity.</p>
<p>All of the scripts require the numba Python package.</p>
<h2 id="orientation-from-gradients">Orientation from gradients</h2>
<p><strong>Script: ex_gradient_dip.py</strong></p>
<p>Calculates orientation from inline, crossline and Z gradients. No filtering is applied

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/dipazimuth/ex_gradient_dip.jpg"
         alt="Unfiltered gradient dip - crossline dip on an inline" width="90%"/> <figcaption>
            <p><strong>Unfiltered gradient dip - crossline dip on an inline</strong></p>
        </figcaption>
</figure>
</p>
<h2 id="orientation-from-vector-filtered-gradients">Orientation from vector filtered gradients</h2>
<p><strong>Script: ex_vf_gradient3_dip.py</strong></p>
<p>Uses <a href="http://www.k-zone.nl/Kroon_DerivativePaper.pdf" title="NUMERICAL OPTIMIZATION OF KERNEL BASED IMAGE DERIVATIVES. Dirk-Jan Kroon, University of Twente, Enschede">Kroon&rsquo;s (2009)</a> 3 point derivative filter to estimate data gradients. Next gradient normal unit vectors are determined and smoothed using a vector filter.





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of inline dip, crossline dip, true dip or dip azimuth.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the extent of the analysis cube in the Z direction. Number of Z samples in cube will be \((2*Zwindow+1)\).</td>
</tr>
<tr>
<td>Stepout</td>
<td>Specifies the inline and crossline extent of the analysis cube. Number of samples in each direction will be \((2*Stepout+1)\).</td>
</tr>
<tr>
<td>Filter</td>
<td>Choice of Mean Dip, L1 Vector Median or L2 Vector Median.</td>
</tr>
</tbody>
</table>
 </div>
</p>
<p>The aperture of the vector filtering is \((2*ZStepOut-1)\) \(Z\) samples and \((2*Stepout-1)\) samples in the inline and crossline
direction. For example for a 5x5x5 analysis cube \((Zwindow=2, Stepout=2)\) the gradients and associated normal unit vectors are generated
on a 3x3x3 cube and vector filtered. The outer samples are only used in the gradient calculation.</p>

<figure class="img-centered">
    <img src="ex_vfmean_gradient_dip.jpg"
         alt="Vector filtered gradient dip - crossline dip on an inline - 5x5x5 input" width="90%"/> <figcaption>
            <p><strong>Vector filtered gradient dip - crossline dip on an inline - 5x5x5 input</strong></p>
        </figcaption>
</figure>

<h2 id="orientation-by-the-gradient-structure-tensor">Orientation by the gradient structure tensor</h2>
<p><strong>Scripts: ex_gradient3_st_dip.py &amp; ex_gradient5_st_dip.py</strong></p>
<p>Uses either <a href="http://www.k-zone.nl/Kroon_DerivativePaper.pdf" title="NUMERICAL OPTIMIZATION OF KERNEL BASED IMAGE DERIVATIVES. Dirk-Jan Kroon, University of Twente, Enschede">Kroon&rsquo;s (2009)</a> 3 point or the <a href="http://www.cns.nyu.edu/pub/lcv/farid03-reprint.pdf" title="Differentiation of Discrete Multidimensional Signals. Hany Farid and Eero P. Simoncelli, IEEE TRANSACTIONS ON IMAGE PROCESSING, VOL. 13, NO. 4, APRIL 2004">Farid and Simoncelli (2004)</a> 5 point derivative filter to estimate data gradients which are then used to form the gradient structure tensor.</p>





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of inline dip, crossline dip, true dip or dip azimuth.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the extent of the analysis cube in the Z direction. Number of Z samples in cube will be \((2*Zwindow+1)\).</td>
</tr>
<tr>
<td>Stepout</td>
<td>Specifies the inline and crossline extent of the analysis cube. Number of samples in each direction will be \((2*Stepout+1)\).</td>
</tr>
</tbody>
</table>
 </div>

<p>For the ex_gradient3 script the structure tensor is formed from an aperture of \((2*ZStepOut-1)\) \(Z\) samples and \((2*Stepout-1)\) samples in the inline and crossline direction.</p>
<p>For the ex_gradient5 script the structure tensor is formed from an aperture of \((2*ZStepOut-2)\) \(Z\) samples and \((2*Stepout-1)\) samples in the inline and crossline direction.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/dipazimuth/ex_gst3_dip.jpg"
         alt="Gradient3 structure tensor dip - crossline dip on an inline - 5x5x5 input" width="90%"/> <figcaption>
            <p><strong>Gradient3 structure tensor dip - crossline dip on an inline - 5x5x5 input</strong></p>
        </figcaption>
</figure>

<h2 id="orientation-from-the-3d-complex-trace-phase">Orientation from the 3D complex trace phase</h2>
<p><strong>Script: ex_phase3_dip.py</strong></p>
<p>Calculates orientation from the 3D complex trace phase gradients as per <a href="http://library.seg.org/doi/abs/10.1190/1.2785048" title="A tutorial on complex seismic trace analysis. Arthur E. Barnes. GEOPHYSICS 2007 72:6, W33-W43">Barnes (2007)</a>. <a href="http://www.k-zone.nl/Kroon_DerivativePaper.pdf" title="NUMERICAL OPTIMIZATION OF KERNEL BASED IMAGE DERIVATIVES. Dirk-Jan Kroon, University of Twente, Enschede">Kroon&rsquo;s (2009)</a> 3 point derivative filter is used to compute gradients.





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of inline dip, crossline dip, true dip or dip azimuth.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the length \((2*Zwindow+1)\) of the time domain operator used to generate the complex analytic signal (recommend &gt;= 15)</td>
</tr>
<tr>
<td>Band</td>
<td>Specifies the proportion of the frequency band to include when generating the complex analytic signal (recommend 0.9).</td>
</tr>
</tbody>
</table>
 </div>
</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/dipazimuth/ex_phase3_dip.jpg"
         alt="Unfiltered phase dip - crossline dip on an inline" width="90%"/> <figcaption>
            <p><strong>Unfiltered phase dip - crossline dip on an inline</strong></p>
        </figcaption>
</figure>

<h2 id="orientation-from-vector-filtered-3d-complex-trace-phase">Orientation from vector filtered 3D complex trace phase</h2>
<p><strong>Script: ex_vf_phase3_dip.py</strong></p>
<p>Calculate orientation unit normal vectors using the 3D complex trace phase gradient and apply a vector filter. <a href="http://www.k-zone.nl/Kroon_DerivativePaper.pdf" title="NUMERICAL OPTIMIZATION OF KERNEL BASED IMAGE DERIVATIVES. Dirk-Jan Kroon, University of Twente, Enschede">Kroon&rsquo;s (2009)</a> 3 point filter used to compute gradients.





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of inline dip, crossline dip, true dip or dip azimuth.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the length \((2*Zwindow+1)\) of the time domain operator used to generate the complex analytic signal (recommend &gt;= 15)</td>
</tr>
<tr>
<td>Stepout</td>
<td>Specifies the inline and crossline extent of the analysis cube. Number of samples in each direction will be \((2*Stepout+1)\).</td>
</tr>
<tr>
<td>Filter</td>
<td>Choice of Mean Dip, L1 Vector Median or L2 Vector Median.</td>
</tr>
<tr>
<td>Vector Filter ZStepOut</td>
<td>Specifies the extent of the analysis cube for vector filtering in the Z direction. Number of Z samples in cube will be \((2*ZStepOut+1)\).</td>
</tr>
<tr>
<td>Band</td>
<td>Specifies the proportion of the frequency band to include when generating the complex analytic signal (recommend 0.9).</td>
</tr>
</tbody>
</table>
 </div>
</p>
<p>The aperture of the vector filter is \((2*ZStepOut+1)\) \(Z\) samples and \((2*Stepout-1)\) samples in the inline and crossline direction.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/dipazimuth/ex_vfmean_phase3_dip.jpg"
         alt="Mean Vector Filtered phase dip - crossline dip on an inline - 3x3x3" width="90%"/> <figcaption>
            <p><strong>Mean Vector Filtered phase dip - crossline dip on an inline - 3x3x3</strong></p>
        </figcaption>
</figure>

<h2 id="orientation-using-the-envelope-weighted-3d-complex-trace-phase-structure-tensor">Orientation using the envelope weighted 3D complex trace phase structure tensor</h2>
<p><strong>Script: ex_weighted_phase3_st_dip.py</strong></p>
<p>Forms a structure tensor from the 3D complex trace phase gradients. Tensor elements are weighted by the trace envelope as per <a href="http://library.seg.org/doi/abs/10.1190/1.2235591?journalCode=gpysa7" title="Computation of dips and azimuths with weighted structural tensor approach. Yi Luo, Yuchun Eugene Wang, Nasher M. AlBinHassan and Mohammed N. Alfaraj, GEOPHYSICS 2006 71:5, V119-V121">Luo etal (2006)</a>. <a href="http://www.k-zone.nl/Kroon_DerivativePaper.pdf" title="NUMERICAL OPTIMIZATION OF KERNEL BASED IMAGE DERIVATIVES. Dirk-Jan Kroon, University of Twente, Enschede">Kroon&rsquo;s (2009)</a> 3 point filter is used to compute gradients.





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of inline dip, crossline dip, true dip or dip azimuth.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the length \((2*Zwindow+1)\) of the time domain operator used to generate the complex analytic signal (recommend &gt;= 15)</td>
</tr>
<tr>
<td>Stepout</td>
<td>Specifies the inline and crossline extent of the analysis cube. Number of samples in each direction will be \((2*Stepout+1)\).</td>
</tr>
<tr>
<td>Tensor ZStepOut</td>
<td>Specifies the extent of the analysis cube for vector filtering in the Z direction. Number of Z samples in cube will be \((2*ZStepOut+1)\).</td>
</tr>
<tr>
<td>Band</td>
<td>Specifies the proportion of the frequency band to include when generating the complex analytic signal (recommend 0.9).</td>
</tr>
</tbody>
</table>
 </div>
</p>
<p>The aperture of the structure tensor is \((2*ZStepOut+1)\) \(Z\) samples and \((2*Stepout-1)\) samples in the inline and crossline direction.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/dipazimuth/ex_phasest_dip.jpg"
         alt="Structure tensor phase dip - crossline dip on an inline - 3x3x3 tensor input" width="90%"/> <figcaption>
            <p><strong>Structure tensor phase dip - crossline dip on an inline - 3x3x3 tensor input</strong></p>
        </figcaption>
</figure>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-14b684fb5a039eb5a6d83b575091729b">4 - LPA Smoothing</h1>
    <div class="lead">structure preserving spatial filter by local polynomial approximation</div>
	<p><strong>Script: ex_lpa_smooth.py</strong></p>
<h2 id="description">Description</h2>
<p>This Python <a href="../../plugins/externalattrib">External Attribute</a> script can be used to filter noise while preserving steep dips. A region of
data around each sample location is approximated by a second order 3D polynomial using gaussian weighted least squares.</p>
<p>The approximation has the following form:</p>
<p>$$ r_0+ r_1 * x + r_2 * y + r_3 * z + r_4 * x^2 + r_5 * y^2 + r_6 * z^2 +r_7 * x * y + r_8 * x * z + r_9 * y * z $$</p>
<p>where x (inline), y (crossline) and z (time/depth) are relative to the analysis location, ie the analysis location has x=y=z=0.</p>
<p>This attribute calculates and outputs only the \(r_0\) term of the local polynomial approximation. This provides a smoother version of
the input with relatively minor smearing of steep dips and fault cuts. Increasing either the Weight Factor or size of the analysis volume
(StepOut or Z window) increases the amount of smoothing.</p>
<h2 id="examples">Examples</h2>
<div class="juxtapose">

    <img src="lpa_input.jpg" data-label="Input" alt="Input" />
    <img src="lpa_2x2x2.jpg" data-label="lpa 2x2x2 WF: 0.5" alt="lpa 2x2x2 WF: 0.5" />

</div>



<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/lpasmooth/lpa_smooth_inputpar.jpg"
         alt="LPA Smoothing external attribute input parameters" width="90%"/> <figcaption>
            <p><strong>LPA Smoothing external attribute input parameters</strong></p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the extent of the analysis cube in the Z direction. Number of Z samples in cube will be \(2 * Zwindow + 1\).</td>
</tr>
<tr>
<td>Stepout</td>
<td>Specifies the inline and crossline extent of the analysis cube. Number of samples in each direction will be \(2 * Stepout + 1\).</td>
</tr>
<tr>
<td>Weight Factor</td>
<td>Determines the extent of the gaussian weight function used in the weighted least squares approximation. The standard deviation of the gaussian weight function \((\sigma)\) is related to this value by:</br> \(\sigma = min(2*Stepout, 2*Zwindow)*WeightFactor\). </br>A value of 0.15 gives near zero weight for points at the smallest extent of the analysis cube.</td>
</tr>
</tbody>
</table>
 </div>

<h1 id="references">References</h1>
<p><a href="http://www.doc.ic.ac.uk/research/technicalreports/2006/DTR06-8.pdf">Anisotropic Multidimensional Savitzky Golay kernels for Smoothing, Differentiation and Reconstruction</a></p>
<p><a href="http://www.diva-portal.org/smash/get/diva2:302485/FULLTEXT01.pdf">Polynomial Expansion for Orientation and Motion Estimation</a></p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6339e016e546cceb00824d6c05b86ba9">5 - PyLops Attributes</h1>
    <div class="lead">various external attributes that use the PyLops linear operator library</div>
	<p>The 6.6.8 release of the wmPlugins includes a number of new Python external attribute scripts that use the <a href="https://pylops.readthedocs.io/en/latest/">PyLops</a>
linear operator library for seismic modelling and inversion.</p>
<p>Assuming wmPlugins is installed using the OpendTect Installation Manager, the scripts will be in the <em>bin/python/wmpy/PyLops</em> folder
of the OpendTect software folder and include:</p>
<ul>
<li>PyLops/ex_poststack_inversion.py</li>
<li>PyLops/ex_poststack_relative_inversion.py</li>
<li>PyLops/ex_poststack_modelling.py</li>
<li>PyLops/ex_prestack_modelling.py</li>
<li>PyLops/ex_make_1d_seismic.py</li>
</ul>
<p>Using these scripts requires a Python environment with the PyLops module and it&rsquo;s dependencies installed. The section
<a href="#installing-pylops">Installing PyLops</a> describes the PyLops installation process.</p>
<h2 id="pylopsex_poststack_inversionpy">PyLops/ex_poststack_inversion.py</h2>
<p>This Python <a href="../../plugins/externalattrib">External Attribute</a> script uses the pylops.avo.poststack.PoststackInversion operator to do
post-stack seismic inversion. The output is either the log Acoustic Impedance (AI) volume or the residual error.</p>
<p>The inputs required are volumes of the seismic to be inverted, a background log AI model and the seismic wavelet. Note that the polarity
of the seismic wavelet must match the data.</p>
<p>The following figures show inversion input and output for a 1D model created by the PyLops/ex_make_1d_seismic.py script.</p>
<p>
<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_poststack_inversion-02.png"
         alt="Impedance Model (red) and Background Model (blue)" width="90%"/> <figcaption>
            <p><strong>Impedance Model (red) and Background Model (blue)</strong></p>
        </figcaption>
</figure>


<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_poststack_inversion-03.png"
         alt="Impedance Model (red) and Seismic Model (blue)" width="90%"/> <figcaption>
            <p><strong>Impedance Model (red) and Seismic Model (blue)</strong></p>
        </figcaption>
</figure>


<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_poststack_inversion-04.png"
         alt="Impedance Model (red) and Inverted Impedance (blue)" width="90%"/> <figcaption>
            <p><strong>Impedance Model (red) and Inverted Impedance (blue)</strong></p>
        </figcaption>
</figure>
</p>
<p>There is also a PyLops/ex_poststack_relative_inversion.py script that runs the inversion without a background model:</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_poststack_inversion-05.png"
         alt="Impedance Model (red) and Inverted Relative Impedance (blue)" width="90%"/> <figcaption>
            <p><strong>Impedance Model (red) and Inverted Relative Impedance (blue)</strong></p>
        </figcaption>
</figure>


<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_poststack_inversion-07.png"
         alt="Inverted Relative Impedance Example" width="90%"/> <figcaption>
            <p><strong>Inverted Relative Impedance Example</strong></p>
        </figcaption>
</figure>

<h3 id="input-parameters">Input Parameters</h3>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_poststack_inversion_input.png"
         alt="ex_poststack_inversion.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_poststack_inversion.py input parameters</strong></p>
        </figcaption>
</figure>

<p>




<div class="container"> <table class="table table-striped table-bordere">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of Acoustic Impedance or the Residual Error.</td>
</tr>
<tr>
<td>Regularization (%)</td>
<td>A small amount of noise to add to stabilize the inversion.</td>
</tr>
<tr>
<td>Wavelet</td>
<td>An OpendTect wavelet file.</td>
</tr>
</tbody>
</table>
 </div>

</br>
Note the wavelet polarity must be consistent with the polarity of the data being inverted.</p>
<h2 id="pylopsex_prestack_modellingpy">PyLops/ex_prestack_modelling.py</h2>
<p>The PyLops/ex_prestack_modelling.py script uses the pylops.avo.avo.AVOLinearModelling operator to create a pre-stack angle volume
from well data. The output is either an Aki-Richards or Fatti approximate reflectivity model filtered by a user specified wavelet.</p>
<p>The inputs required are 3 log data cubes with compressional sonic (DT in us/m), shear sonic (DTS in us/m) and density (RHOB in g/cc). These
can be created from well log data using the &ldquo;Create Log Cube&rdquo; right mouse button context menu in the scene well tree or the
&ldquo;Processing|Create Seismic Output|From Well Logs&rdquo; main menu. Also needed is a wavelet with the appropriate polarity for the data being modelled.</p>
<p>The generated synthetics can be displayed in the 3D window and compared with real angle stack data through the well location.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_prestack_modelling-01.jpg"
         alt="Prestack modelling example" width="90%"/> <figcaption>
            <p><strong>Prestack modelling example</strong></p>
        </figcaption>
</figure>

<h3 id="input-parameters-1">Input Parameters</h3>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/pylops/ex_pylops_prestack_modelling_input.png"
         alt="ex_prestack_modelling.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_prestack_modelling.py input parameters</strong></p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Angle (deg)</td>
<td>The desired output angle volume.</td>
</tr>
<tr>
<td>Method</td>
<td>What approximation to use, Aki RIchards or Fatti.</td>
</tr>
<tr>
<td>Wavelet</td>
<td>An OpendTect wavelet file.</td>
</tr>
</tbody>
</table>
 </div>

<h2 id="installing-pylops">Installing PyLops</h2>
<p>The PyLops Python package and it&rsquo;s dependencies can be installed in an active conda environment using:</p>
<pre tabindex="0"><code>conda install -c conda-forge pylops
</code></pre><p>or</p>
<pre tabindex="0"><code>pip install pylops
</code></pre><p>See the <a href="https://pylops.readthedocs.io/en/latest/installation.html">PyLops documentation</a> for more information.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-7620b32bbbc8a8e4506e9152225ada74">6 - Spatial Filter - Circular</h1>
    <div class="lead">lowpass, highpass, bandpass or band reject circularly symmetric spatial filters</div>
	<p><strong>Script: Filtering/ex_spatial_filter_circular.py</strong></p>
<h2 id="description">Description</h2>
<p>This Python <a href="../../plugins/externalattrib">External Attribute</a> script applies lowpass, highpass, bandpass or band reject circularly symmetric
spatial filters. The filters are applied by direct spatial convolution using the MAXFLAT operators described by
<a href="https://www.researchgate.net/publication/3384111_Explicit_formulae_for_coefficients_of_2D_circular_symmetric_MAXFLATFIR_lowhigh_pass_digital_filters" title="Explicit formulae for coefficients of 2D circular symmetric MAXFLAT FIR low/high pass digital filters.  Electronics Letters Volume: 37, Issue: 24, 22 Nov 2001">Khan and Ohba (2001)</a>.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/spatialfiltercircular/ex_spatial_filter_resp.jpg"
         alt="Filter responses" width="90%"/> <figcaption>
            <p><strong>Filter responses</strong></p>
        </figcaption>
</figure>

<p>Note that the filter cutoff or band pass/reject frequency is specified in Normalised Spatial Frequency. Normalised Frequency ranges
from 0 to 1 at the spatial nyquist. Converting a spatial frequency in cycles/metre to the equivalent Normalised Spatial Frequency
is as simple as dividing it by the spatial nyquist frequency.</p>
<p>As written the filter does not take into account differences in spatial sampling in the inline and crossline directions.</p>
<h2 id="examples">Examples</h2>
<p>This example uses a Low Pass filter to remove acquisition footprint from the F3 Demo dataset.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/spatialfiltercircular/ex_spatial_filter_fkinput.jpg"
         alt="FK spectrum of inline 425" width="90%"/> <figcaption>
            <p><strong>FK spectrum of inline 425</strong></p>
        </figcaption>
</figure>

<p>Note the noise at 0.0133 cycles/metre or 0.67 normalised frequency (i.e. 0.0133/0.02).</p>
<p>A spatial low pass filter with a normalised frequency cutoff of 0.5 is very effective at attenuating this acquisition footprint.</p>
<div class="juxtapose">

    <img src="ex_spatial_filter_inline_input.jpg" data-label="Input Iln425" alt="Input Iln425" />
    <img src="ex_spatial_filter_inline_filtered.jpg" data-label="Lowpass Filtered Iln425" alt="Lowpass Filtered Iln425" />

</div>




<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/spatialfiltercircular/ex_spatial_filter_fkoutput.jpg"
         alt="FK spectrum of inline 425 after filter" width="90%"/> <figcaption>
            <p><strong>FK spectrum of inline 425 after filter</strong></p>
        </figcaption>
</figure>

<div class="juxtapose">

    <img src="ex_spatial_filter_slice_input.jpg" data-label="Input Slice300ms" alt="Input Slice300ms" />
    <img src="ex_spatial_filter_slice_filtered.jpg" data-label="Lowpass Filtered Slice300ms" alt="Lowpass Filtered Slice300ms" />

</div>



<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/spatialfiltercircular/ex_spatial_filter_input.jpg"
         alt="ex_spatial_filter.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_spatial_filter.py input parameters</strong></p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stepout</td>
<td>Determines the size of the convolution operator. Minimum of 9 (filter kernel size of 19) recommended.</td>
</tr>
<tr>
<td>Type</td>
<td>Filter type - Low Pass, High Pass, Band Pass or Band Reject.</td>
</tr>
<tr>
<td>Normalised Spatial Frequency</td>
<td>For Low Pass and High Pass filters this specifies the filter cutoff. For Band Pass/Reject filters this is the centre of the pass/reject band. The width of the band is hardwired to +/- 0.1 in the script. The filter cutoff corresponds to the half amplitude point.</td>
</tr>
</tbody>
</table>
 </div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-74177a1ba4b2b32107ee6625c357dbf0">7 - Spatial Filter - Rectangular</h1>
    <div class="lead">lowpass, highpass, bandpass or band reject rectangular spatial filters</div>
	<p><strong>Script: Filtering/ex_spatial_filter_rectangular.py</strong></p>
<h2 id="description">Description</h2>
<p>This Python <a href="../../plugins/externalattrib">External Attribute</a> script applies lowpass, highpass, bandpass or band reject spatial filters with rectangular
symmetry. The filters are applied by direct spatial convolution of a kernel formed by cascading two 1D Hamming Window FIR filters
computed using scipy.signal.firwin (<a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.firwin.html)">https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.firwin.html)</a>.</p>
<p>By setting the stepout in one direction to 0 the filter will be applied as a 1D spatial filter in the other direction.</p>
<p>Note that the filter cutoff or band pass/reject frequency is specified in Normalised Spatial Frequency. Normalised Frequency ranges
from 0 to 1 at the spatial nyquist. Converting a spatial frequency in cycles/metre to the equivalent Normalised Spatial Frequency is
as simple as dividing it by the spatial nyquist frequency.</p>
<h2 id="examples">Examples</h2>
<p>This example shows inline and crossline FK spectra after applying a 2D lowpass rectangular filter with inline and crossline normalised
frequency cutoffs of 0.6 and 0.3 respectively.</p>
<div class="juxtapose">

    <img src="ex_spatial_filter_rect_inlinefk.jpg" data-label="Input Inline FK Spectrum" alt="Input Inline FK Spectrum" />
    <img src="ex_spatial_filter_rect_inlinefiltfk.jpg" data-label="After lowpass filter" alt="After lowpass filter" />

</div>



<div class="juxtapose">

    <img src="ex_spatial_filter_rect_xlinefk.jpg" data-label="Input crossline FK Spectrum" alt="Input crossline FK Spectrum" />
    <img src="ex_spatial_filter_rect_xlinefiltfk.jpg" data-label="After lowpass filter" alt="After lowpass filter" />

</div>



<p>This example shows a timeslice at 300ms TWT from the F3 Demo dataset after applying a 1D spatial filter along the inlines
(stepout of 0,9) with a crossline normalised frequency cutoff of 0.5.</p>
<div class="juxtapose">

    <img src="ex_spatial_filter_slice_input.jpg" data-label="Input" alt="Input" />
    <img src="ex_spatial_filter_slice_1Dlowpass.jpg" data-label="Xline Lowpass Filtered" alt="Xline Lowpass Filtered" />

</div>



<p>This example shows the timeslice at 300ms TWT from the F3 Demo dataset with the crossline lowpass filter above followed by
a 1D bandreject spatial filter along the crosslines (stepout 9,0) with an inline normalised rejection frequency of 0.17.</p>
<div class="juxtapose">

    <img src="ex_spatial_filter_slice_1Dlowpass.jpg" data-label="Xline Lowpass Input" alt="Xline Lowpass Input" />
    <img src="ex_spatial_filter_slice_1Dlowpass_1Dnotch.jpg" data-label="Inline Bandreject Filtered" alt="Inline Bandreject Filtered" />

</div>



<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/spatialfilterrectangular/ex_spatial_filter_rect_input.jpg"
         alt="ex_spatial_filte_rectangular.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_spatial_filte_rectangular.py input parameters</strong></p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stepout</td>
<td>Determines the size of the convolution operator. Minimum of 9 (filter kernel size of 19) recommended. Setting the stepout to zero will apply a 1D filter, e.g. a stepout of 0,9 will apply a 1D crossline frequency filter.</td>
</tr>
<tr>
<td>Type</td>
<td>Filter type - Low Pass, High Pass, Band Pass or Band Reject.</td>
</tr>
<tr>
<td>Normalised Inline Spatial Frequency</td>
<td>For Low Pass and High Pass filters this specifies the inline filter cutoff. For Band Pass/Reject filters this is the centre of the pass/reject band. The width of the band is hardwired to +/- 0.1 in the script. The filter cutoff corresponds to the half amplitude point.</td>
</tr>
<tr>
<td>Normalised Xline Spatial Frequency</td>
<td>For Low Pass and High Pass filters this specifies the crosslineline filter cutoff. For Band Pass/Reject filters this is the centre of the pass/reject band. The width of the band is hardwired to +/- 0.1 in the script. The filter cutoff corresponds to the half amplitude point.</td>
</tr>
</tbody>
</table>
 </div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-bb20e9884ad12460dce0dba23654d323">8 - Vector Filter</h1>
    <div class="lead">vector filter orientation (inline and crossline dip) data</div>
	<p><strong>Script: ex_vector_filter_dip.py</strong></p>
<h2 id="description">Description</h2>
<p>This <a href="../../plugins/externalattrib">External Attribute</a> script can be used to apply a vector filter to orientation ( inline and crossline dip) data.
The script offers a choice of mean vector, L1 vector median and L2 vector median filters.</p>
<p>Initially the inline and crossline dip data are converted to a normal vector to the local orientation: \([x_i, y_i, z_i]\).</p>
<p>The Mean Vector Filter averages each of the vector components of the orientation normal vectors in the analysis cube:
$$
\Big[x_f, y_f, z_f\Big]  = \frac{1}{N} \Big[\sum\limits_{i}^N x_i, \sum\limits_{i}^N y_i, \sum\limits_{i}^N z_i\Big]
$$</p>
<p>The L1 vector filter finds the normal vector in the analysis cube whose sum of absolute distance from all the others is a minimum:
$$
\Big[x_f, y_f, z_f\Big] = argmin \sum\limits_{i}^N \Big[|x_f-x_i| + |y_f-y_i| + |z_f-z_i|\Big]
$$</p>
<p>The L2 vector filter finds the normal vector in the analysis cube whose sum of squared distance from all the others is a minimum:
$$
\Big[x_f, y_f, z_f\Big] = argmin \sum\limits_{i}^N \Big[(x_f-x_i)^2 + (y_f-y_i)^2 + (z_f-z_i)^2\Big]
$$</p>
<p>The filtered orientation can be output as any of the following:</p>





<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>OUTPUT</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Inline Dip</td>
<td>Event dip observed on a crossline in microseconds per metre for time surveys and millimetres per metre for depth surveys. Output can be positive or negative with the convention that events dipping towards larger inline numbers producing positive dips.</td>
</tr>
<tr>
<td>Crossline Dip</td>
<td>Event dip observed on an inline in microseconds per metre for time surveys and millimetres per metre for depth surveys. Output can be positive or negative with the convention that events dipping towards larger crossline numbers producing positive dips.</td>
</tr>
<tr>
<td>True Dip</td>
<td>Event dip in microseconds per metre for time surveys and millimetres per metre for depth surveys. Output is always positive.</td>
</tr>
<tr>
<td>Dip Azimuth</td>
<td>Azimuth of the True Dip direction relative to the survey orientation. Output ranges from -180 to 180 degrees. Positive azimuth is defined from the inline in the direction of increasing crossline numbers. Azimuth = 0 indicates that the dip is dipping in the direction of increasing crossline numbers. Azimuth = 90 indicates that the dip is dipping in the direction of increasing inline numbers.</td>
</tr>
</tbody>
</table>
 </div>

</br>
The script requires the Numba Python package.
<h2 id="examples">Examples</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/vectorfilter/ex_phase_dip.jpg"
         alt="Unfiltered phase dip - crossline dip on an inline" width="90%"/> <figcaption>
            <p><strong>Unfiltered phase dip - crossline dip on an inline</strong></p>
        </figcaption>
</figure>


<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/vectorfilter/ex_vfmean_phase_dip.jpg"
         alt="Mean vector filtered phase dip - 3x3x3 (Stepout and ZWindow of 1)" width="90%"/> <figcaption>
            <p><strong>Mean vector filtered phase dip - 3x3x3 (Stepout and ZWindow of 1)</strong></p>
        </figcaption>
</figure>


<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/vectorfilter/ex_vfl1_phase_dip.jpg"
         alt="L1 vector median filtered phase dip - 3x3x3 (Stepout and ZWindow of 1)" width="90%"/> <figcaption>
            <p><strong>L1 vector median filtered phase dip - 3x3x3 (Stepout and ZWindow of 1)</strong></p>
        </figcaption>
</figure>


<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/vectorfilter/ex_vfl2_phase_dip.jpg"
         alt="L2 vector median filtered phase dip - 3x3x3 (Stepout and ZWindow of 1)" width="90%"/> <figcaption>
            <p><strong>L2 vector median filtered phase dip - 3x3x3 (Stepout and ZWindow of 1)</strong></p>
        </figcaption>
</figure>

<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/vectorfilter/ex_vector_filter_dip_input.jpg"
         alt="ex_vector_filter_dip.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_vector_filter_dip.py input parameters</strong></p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of inline dip, crossline dip, true dip or dip azimuth.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>Specifies the extent of the analysis cube in the Z direction. Number of Z samples in cube will be \((2*Zwindow+1)\).</td>
</tr>
<tr>
<td>Stepout</td>
<td>Specifies the inline and crossline extent of the analysis cube. Number of samples in each direction will be \((2*Stepout+1)\).</td>
</tr>
<tr>
<td>Filter</td>
<td>Choice of Mean Dip, L1 Vector Median or L2 Vector Median.</td>
</tr>
</tbody>
</table>
 </div>


</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9834c339e4430f5c90b058dd1e3b0f77">9 - Time Delay Estimation</h1>
    <div class="lead">measure time shifts between volumes using correlation</div>
	<p><strong>Script: Miscellaneous/ex_correlation.py</strong></p>
<h2 id="description">Description</h2>
<p>This Python <a href="../../plugins/externalattrib">External Attribute</a> script provides an alternative to the builtin OpendTect
<a href="http://doc.opendtect.org/6.0.0/doc/od_userdoc/Default.htm#appendix_a-attributes_and_filters/match_delta.htm%3FTocPath%3D11%2520Appendix%2520A%2520-%2520Attributes%2520and%2520Filters%7C_____13">Match Delta</a> attribute to measure time shifts between similar events in different seismic volumes. This script uses local normalised cross correlation to determine the relative Z shift between 2 data volumes. Aside from the estimate of relative Z shift the attribute can also output the correlation value. The correlation value which ranges from 0 (low correlation) to 1 (high correlation) provides a quantitative assessment of the reliability of the Z shift estimate.</p>
<p>The script requires the Numba Python package.</p>
<h2 id="examples">Examples</h2>
<p>This example provides a comparison of this external attribute script (left) with the Match Delta attribute (right) for a depth section and
itself shifted up by 13 metres. The Match Delta attribute output is much noisier albiet it can be calculated much quicker.</p>
<div class="juxtapose">

    <img src="ex_correlation_example.jpg" data-label="External Attribute" alt="External Attribute" />
    <img src="match_delta.jpg" data-label="Match Delta" alt="Match Delta" />

</div>



<p>This example shows the Correlation Quality output for the same data as above.</p>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/zdelayest/ex_correlation_quality.jpg"
         alt="Correlation quality**" width="90%"/> <figcaption>
            <p>Correlation quality**</p>
        </figcaption>
</figure>

<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/zdelayest/ex_correlation_input.jpg"
         alt="ex_correlation.py input parameters**" width="90%"/> <figcaption>
            <p>ex_correlation.py input parameters**</p>
        </figcaption>
</figure>






<div class="container"> <table class="table table-striped table-bordered">
<thead>
<tr>
<th>NAME</th>
<th>DESCRIPTION</th>
</tr>
</thead>
<tbody>
<tr>
<td>Output</td>
<td>What to calculate - choice of the Z shift in millisecs or metres or the corresponding correlation coefficient.</td>
</tr>
<tr>
<td>Z window (+/-samples)</td>
<td>This in conjunction with the Max Lag parameter determines the length of the segments cross correlated. \(SegmentLength = 2*(Zwindow - MaxLag)+1\).</td>
</tr>
<tr>
<td>Max Lag (samples)</td>
<td>Specifies maximum number of samples to search for the maximum correlation.</td>
</tr>
</tbody>
</table>
 </div>

<p>Note the user has to ensure that Z window is greater than Max Lag otherwise the script will exit with errors.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-9263895aadfe62f3ba6db24d9f3eb8f9">10 - ZC Block</h1>
    <div class="lead">blocks a seismic trace between zero crossings</div>
	<p><strong>Script: Miscellaneous/ex_zc_block.py</strong></p>
<h2 id="description">Description</h2>
<p>This Python <a href="../../plugins/externalattrib">External Attribute</a> script blocks a seismic trace between zero crossings. The block amplitude is
determined by the min/max of the interval blocked.</p>
<p>The script requires the Numba Python package.</p>
<h2 id="examples">Examples</h2>
<p>This example shows the attribute output (black wiggle) over the input (variable density). To get a blocky wiggle display interpolation has to be turned off in the 2D viewer properties.

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/zcblock/ex_zc_block_example.jpg"
         alt="Zero crossing block" width="90%"/> <figcaption>
            <p><strong>Zero crossing block</strong></p>
        </figcaption>
</figure>
</p>
<h2 id="input-parameters">Input Parameters</h2>

<figure class="img-centered">
    <img src="/WMPlugin-Docs/docs/externalattributes/zcblock/ex_zc_block_input.jpg"
         alt="ex_zc_block.py input parameters" width="90%"/> <figcaption>
            <p><strong>ex_zc_block.py input parameters</strong></p>
        </figcaption>
</figure>

<p>There are no input parameters other than selection of the input volume.</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://groups.google.com/a/opendtect.org/g/users" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="LinkedIn" aria-label="LinkedIn">
    <a class="text-white" target="_blank" rel="noopener" href="https://www.linkedin.com/in/waynemogg/" aria-label="LinkedIn">
      <i class="fab fa-linkedin-in"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/waynegm/OpendTect-Plugins" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2022 Wayne Mogg All Rights Reserved</small>
        
	
		<p class="mt-2"><a href="/WMPlugin-Docs/about/">About WMPlugins</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/WMPlugin-Docs/js/tabpane-persist.js'></script>






<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css"
    integrity="sha512-vJqxkZ+Sugf/6WRlpcxN01qVfX/29hF6qc33eHF1va3NgoV+U+wCi+uTAsQ10sDoGyBxHLdaHvGwDlV3yVYboA==" crossorigin="anonymous">

<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"
    integrity="sha512-5ufNcHqOYgilGEHPfuRIQ5B/vDS1M8+UC+DESZ5CwVgGTg+b2Ol/15rYL/GiCWJ/Sx8oVo0FPFok1dPk8U9INQ=="
    crossorigin="anonymous"></script>



<script defer src='https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js'
    integrity='sha512-ZA/RPrAo88DlwRnnoNVqKINnQNcWERzRK03PDaA4GIJiVZvGFIWQbdWCsUebMZfkWohnfngsDjXzU6PokO4jGw==' crossorigin='anonymous' 
    onload='renderMathInElement(document.body, null);'></script>















<script src="/WMPlugin-Docs/js/main.min.42193e94c144a53fc86f5be701ff2d0833936ce47504213b8207eb5546a1bcf1.js" integrity="sha256-Qhk&#43;lMFEpT/Ib1vnAf8tCDOTbOR1BCE7ggfrVUahvPE=" crossorigin="anonymous"></script>




<script src='/WMPlugin-Docs/js/juxtapose.js'></script>


  </body>
</html>
